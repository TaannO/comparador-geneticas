
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Comparador de Genéticas — Terpenos y Cannabinoides</title>
  <script src="https://cdn.plot.ly/plotly-2.26.1.min.js"></script>
  <style>
    body{font-family:Inter,Arial,sans-serif;margin:20px;background:#f9fafb;color:#111;}
    .container{max-width:1200px;margin:auto;}
    h1{margin-bottom:0.3rem;}
    p.note{font-size:0.9rem;color:#444;}
    .chart-card{background:#fff;padding:12px;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,0.05);margin-bottom:22px;}
  </style>
</head>
<body>
<div class="container">
  <h1>Comparador de Genéticas</h1>
  <p class="note">Podés activar/desactivar cada genética haciendo clic en su nombre en la leyenda. Todos los valores "&lt;1 mg/g" se estimaron como 0.5 mg/g.</p>
  <div class="chart-card"><h3>Terpenos (porcentaje relativo)</h3><div id="terpenes" style="height:450px;"></div></div>
  <div class="chart-card"><h3>Cannabinoides (mg/g materia vegetal)</h3><div id="cannabinoids" style="height:350px;"></div></div>
</div>

<script>
const data = {
  "RABONA 409": {
    "terpenes": {"D-Limonene":30.1,"β-Caryophyllene":16.8,"3,7(11)-Selinadiene":14.9,"β-Pinene":7.5,"Guaiol":6.4,"Linalool":5.1,"Humulene":4.8,"γ-Elemene":4.4,"α-Pinene":4.3,"Fenchol":3.2,"α-Bergamotene":2.5},
    "cannabinoids": {"THCA":173,"9-THC":4,"8-THC":1,"CBDV":0.5,"CBDA":0.5,"CBG":0.5,"CBD":0.5,"THCV":0.5,"CBN":0.5,"CBL":0.5,"CBC":0.5}
  },
  "RABONA 380": {
    "terpenes": {"D-Limonene":19.1,"Caryophyllene":17.0,"Selina-3,7(11)-diene":10.6,"Linalool":8.3,"Guaiol":7.4,"Humulene":6.4,"γ-Elemene":5.6,"β-Pinene":4.8,"α-Bisabolol":4.1,"α-Bergamotene":3.6,"α-Terpineol":3.5,"Fenchol":3.3,"α-Pinene":2.9,"β-Myrcene":2.1,"β-cis-Ocimene":1.3},
    "cannabinoids": {"THCA":187,"9-THC":5,"8-THC":1,"CBDV":0.5,"CBDA":0.5,"CBG":0.5,"CBD":0.5,"THCV":0.5,"CBN":0.5,"CBL":0.5,"CBC":0.5}
  },
  "SATANGIE": {
    "terpenes": {"Caryophyllene":26.6,"D-Limonene":18.5,"Guaiol":10.6,"Selina-3,7(11)-diene":8.0,"Humulene":7.4,"Linalool":5.3,"α-Bisabolol":5.1,"β-Pinene":4.2,"γ-Elemene":3.6,"α-Bergamotene":3.5,"β-Myrcene":2.8,"α-Pinene":2.8,"β-Ocimene":1.6},
    "cannabinoids": {"THCA":169,"9-THC":5,"8-THC":1,"CBDV":0.5,"CBDA":1,"CBG":0.5,"CBD":0.5,"THCV":0.5,"CBN":0.5,"CBL":0.5,"CBC":0.5}
  },
  "BUDIN": {
    "terpenes": {"D-Limonene":18.3,"Caryophyllene":17.6,"Selina-3,7(11)-diene":15.0,"Guaiol":10.6,"Linalool":7.0,"β-Pinene":6.4,"γ-Elemene":5.3,"Fenchol":5.1,"α-Bergamotene":4.9,"α-Pinene":3.6,"β-Myrcene":3.4,"β-Ocimene":2.8},
    "cannabinoids": {"THCA":182,"9-THC":6,"8-THC":1,"CBDV":0.5,"CBDA":3,"CBG":0.5,"CBD":0.5,"THCV":0.5,"CBN":0.5,"CBL":0.5,"CBC":0.5}
  }
};

const strains = Object.keys(data);
let terpNames = new Set();
for (let s of strains) Object.keys(data[s].terpenes).forEach(t=>terpNames.add(t));
terpNames = Array.from(terpNames);
terpNames.sort((a,b)=>{
  const maxA = Math.max(...strains.map(s=> data[s].terpenes[a]||0 ));
  const maxB = Math.max(...strains.map(s=> data[s].terpenes[b]||0 ));
  return maxB - maxA;
});
const canNames = ["THCA","9-THC","8-THC","CBDA","CBDV","CBG","CBD","THCV","CBN","CBL","CBC"];

const terpTraces = strains.map((s,i)=>({
  x:terpNames, y:terpNames.map(t=>data[s].terpenes[t]||0),
  mode:'lines+markers', name:s, line:{shape:'spline',width:3}
}));
const terpLayout = {
  margin:{t:20,l:60,r:30,b:120},
  yaxis:{title:'% relativo',rangemode:'tozero'},
  xaxis:{tickangle:-45},
  height:450
};
Plotly.newPlot('terpenes',terpTraces,terpLayout,{responsive:true});

const canTraces = strains.map((s,i)=>({
  x:canNames, y:canNames.map(c=>data[s].cannabinoids[c]||0),
  type:'bar', name:s
}));
const canLayout = {
  barmode:'group',
  margin:{t:20,l:60,r:30,b:60},
  yaxis:{title:'mg/g materia vegetal',rangemode:'tozero'},
  height:350
};
Plotly.newPlot('cannabinoids',canTraces,canLayout,{responsive:true});
</script>
</body>
</html>
